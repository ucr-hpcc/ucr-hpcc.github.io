<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>Security | HPCC</title><meta property="og:title" content="Security"><meta property="og:description" content="Protection Levels and Classification UCR protection levels, and data classifications are outlined by UCOP as a UC wide policy: UCOP Institutional Information and IT Resource Classification According to the above documentation, there are 4 levels of protection for 4 classifications of data:
| Protection Level | Policy | Examples | |&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;| | P1 - Minimal | IS-1 | Internet facing websites, press releases, anything intended for public use | | P2 - Low | IS-2 | Unpublished research work, intellectual property NOT classified as P3 or P4 | | P3 - Moderate | IS-3 | Research information classified by an Institutional Review Board as P3 (ie."><meta property="og:type" content="article"><meta property="og:url" content="https://dev.hpcc.ucr.edu/manuals/hpc_cluster/manuals_linux-cluster_security/"><meta property="article:section" content="Manuals"><meta property="article:modified_time" content="2021-07-06T13:06:48-07:00"><meta property="og:site_name" content="HPCC"><meta itemprop=name content="Security"><meta itemprop=description content="Protection Levels and Classification UCR protection levels, and data classifications are outlined by UCOP as a UC wide policy: UCOP Institutional Information and IT Resource Classification According to the above documentation, there are 4 levels of protection for 4 classifications of data:
| Protection Level | Policy | Examples | |&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;| | P1 - Minimal | IS-1 | Internet facing websites, press releases, anything intended for public use | | P2 - Low | IS-2 | Unpublished research work, intellectual property NOT classified as P3 or P4 | | P3 - Moderate | IS-3 | Research information classified by an Institutional Review Board as P3 (ie."><meta itemprop=dateModified content="2021-07-06T13:06:48-07:00"><meta itemprop=wordCount content="1424"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Security"><meta name=twitter:description content="Protection Levels and Classification UCR protection levels, and data classifications are outlined by UCOP as a UC wide policy: UCOP Institutional Information and IT Resource Classification According to the above documentation, there are 4 levels of protection for 4 classifications of data:
| Protection Level | Policy | Examples | |&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;| | P1 - Minimal | IS-1 | Internet facing websites, press releases, anything intended for public use | | P2 - Low | IS-2 | Unpublished research work, intellectual property NOT classified as P3 or P4 | | P3 - Moderate | IS-3 | Research information classified by an Institutional Review Board as P3 (ie."><link rel=preload href=../../../scss/main.min.e8d637f30893e85918b2aeae9cd9eab6c68fcd7998810e804d7c9ab542fbfd45.css as=style><link href=../../../scss/main.min.e8d637f30893e85918b2aeae9cd9eab6c68fcd7998810e804d7c9ab542fbfd45.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><link rel=stylesheet href=../../../css/prism.css><script src=../../../js/driver0.9.8.min.js></script><link rel=stylesheet href=../../../css/driver0.9.8.min.css><link rel=stylesheet href=../../../css/site.css><script src=../../../js/site.js></script></head><body class="td-page line-numbers"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../../><span class=font-weight-bold>HPCC</span></a>
<row class=header-switch><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=sidebarSwitch checked>
<label class=custom-control-label for=sidebarSwitch>sidebar</label></div><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=tocSwitch checked>
<label class=custom-control-label for=tocSwitch>toc</label></div></row><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../about id=navbarDropdown role=button>About</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../about/hardware/ style=padding-left:1rem;font-weight:calc(3/3*500)>Hardware</a>
<a class=dropdown-item href=../../../about/software/ style=padding-left:1rem;font-weight:calc(3/3*500)>Software</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../community id=navbarDropdown role=button>Community</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../community/events_small/ style=padding-left:1rem;font-weight:calc(3/3*500)>Small Events</a>
<a class=dropdown-item href=../../../community/events_related/ style=padding-left:1rem;font-weight:calc(3/3*500)>Related Events</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../related/ id=navbarDropdown role=button>Related</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://research.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>RED-UCR</a>
<a class=dropdown-item href=http://datascience.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>Data Science Center</a>
<a class=dropdown-item href=http://bigdata.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>FIELDS Program</a>
<a class=dropdown-item href=http://genomics.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>Institute of Integrative Genome Biology</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../manuals id=navbarDropdown role=button>Manuals</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../manuals/linux_basics/ style=padding-left:1rem;font-weight:calc(3/3*500)>Linux Basics</a>
<a class=dropdown-item href=../../../manuals/hpc_cluster/ style=padding-left:1rem;font-weight:calc(3/3*500)>HPC Cluster</a>
<a class=dropdown-item href=../../../manuals/hpcc_cloud/ style=padding-left:1rem;font-weight:calc(3/3*500)>HPCC Cloud</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.b3de9d68358b8d90ccd88899a0fec1e1.json data-offline-search-base-href=../../../ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center d-lg-none"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.b3de9d68358b8d90ccd88899a0fec1e1.json data-offline-search-base-href=../../../ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Manuals</a></li><ul><li class="collapse show" id=manuals><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/hpc_cluster/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">HPC Cluster</a></li><ul><li class="collapse show" id=manualshpc_cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_users href=../../../manuals/hpc_cluster/manuals_linux-cluster_users/>Communicating</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_storage href=../../../manuals/hpc_cluster/manuals_linux-cluster_storage/>Data Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_start href=../../../manuals/hpc_cluster/manuals_linux-cluster_start/>Getting Started</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_intro href=../../../manuals/hpc_cluster/manuals_linux-cluster_intro/>Introduction</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_login href=../../../manuals/hpc_cluster/manuals_linux-cluster_login/>Login</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_jobs href=../../../manuals/hpc_cluster/manuals_linux-cluster_jobs/>Managing Jobs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_package-manage href=../../../manuals/hpc_cluster/manuals_linux-cluster_package-manage/>Package Management</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_parallelr href=../../../manuals/hpc_cluster/manuals_linux-cluster_parallelr/>Parallel Evaluations in R</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_queue href=../../../manuals/hpc_cluster/manuals_linux-cluster_queue/>Queue Policies</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-manualshpc_clustermanuals_linux-cluster_security href=../../../manuals/hpc_cluster/manuals_linux-cluster_security/>Security</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_sharing href=../../../manuals/hpc_cluster/manuals_linux-cluster_sharing/>Sharing Data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_sshkeys_macos href=../../../manuals/hpc_cluster/manuals_linux-cluster_sshkeys_macos/>SSH Keys Apple macOS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_sshkeys_winos href=../../../manuals/hpc_cluster/manuals_linux-cluster_sshkeys_winos/>SSH Keys Microsoft Windows</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_terminalide href=../../../manuals/hpc_cluster/manuals_linux-cluster_terminalide/>Terminal-based Working Environments</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustermanuals_linux-cluster_visual href=../../../manuals/hpc_cluster/manuals_linux-cluster_visual/>Visualization</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/hpcc_cloud/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">HPCC Cloud/External</a></li><ul><li class=collapse id=manualshpcc_cloud><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_create-acct href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_create-acct/>Account Creation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_egress href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_egress/>Account Egress Waiver</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_operation href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_operation/>Cluster Operation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_billing href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_billing/>Cost Control and Billing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_setup href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_setup/>HPCC cfnCluster Setup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_intro href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_intro/>Introduction</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/linux_basics/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Linux Basics</a></li><ul><li class=collapse id=manualslinux_basics><a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsintro href=../../../manuals/linux_basics/intro/>Access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicscmdline_basics href=../../../manuals/linux_basics/cmdline_basics/>Command Line Basics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsfilesystems href=../../../manuals/linux_basics/filesystems/>File Systems and Transfers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsfinding_things href=../../../manuals/linux_basics/finding_things/>Finding Things</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicspermissions href=../../../manuals/linux_basics/permissions/>Permissions and Ownership</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicspipes href=../../../manuals/linux_basics/pipes/>Piping</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsprocesses href=../../../manuals/linux_basics/processes/>Process Management</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsshell href=../../../manuals/linux_basics/shell/>Shell Bootcamp</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsstreams href=../../../manuals/linux_basics/streams/>Streams</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicstext href=../../../manuals/linux_basics/text/>Text Editors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsvariables href=../../../manuals/linux_basics/variables/>Variables</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><nav id=TableOfContents><ul><li><a href=#protection-levels-and-classification>Protection Levels and Classification</a></li><li><a href=#general-guidelines>General Guidelines</a></li><li><a href=#access-controls>Access Controls</a><ul><li><a href=#gpfs-acls>GPFS ACLs</a></li><li><a href=#xfs-acls>XFS ACLs</a></li></ul></li><li><a href=#encryption>Encryption</a><ul><li><a href=#in-transit>In Transit</a></li><li><a href=#at-rest>At Rest</a><ul><li><a href=#gocryptfsmgr>GocryptfsMgr</a></li><li><a href=#gocryptfs>Gocryptfs</a></li></ul></li></ul></li><li><a href=#deletion>Deletion</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://dev.hpcc.ucr.edu/manuals/>Manuals</a></li><li class=breadcrumb-item><a href=https://dev.hpcc.ucr.edu/manuals/hpc_cluster/>HPC Cluster</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://dev.hpcc.ucr.edu/manuals/hpc_cluster/manuals_linux-cluster_security/>Security</a></li></ol></nav><div class=td-content><h1>Security</h1><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i> 7 minute read</p><h2 id=protection-levels-and-classification>Protection Levels and Classification</h2><p>UCR protection levels, and data classifications are outlined by UCOP as a UC wide policy: <a href=https://security.ucop.edu/policies/institutional-information-and-it-resource-classification.html>UCOP Institutional Information and IT Resource Classification</a>
According to the above documentation, there are 4 levels of protection for 4 classifications of data:</p><p>| Protection Level | Policy | Examples |
|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;|
| P1 - Minimal | IS-1 | Internet facing websites, press releases, anything intended for public use |
| P2 - Low | IS-2 | Unpublished research work, intellectual property NOT classified as P3 or P4 |
| P3 - Moderate | IS-3 | Research information classified by an Institutional Review Board as P3 (ie. dbGaP from NIH) |
| P4 - High | IS-4 | Protected Health Information (PHI/HIPAA), patient records, sensitive identifiable human subject research data, Social Security Numbers |</p><p>The HPC cluster could be compliant with with other security polices (ie. NIH), however the policy must be reviewed by our security team.</p><p>At this time the HPC cluster is not a IS-4 (P4) compliant cluster. If you have needs for very sensitive data, it may be best to work with UCSD and their <a href=https://sherlock.sdsc.edu/>Sherlock service</a>.
Our cluster is IS-3 compliant, however there are several responsibilities that users will need to adhere to.</p><h2 id=general-guidelines>General Guidelines</h2><p><span style=color:red>First, please contact us (<a href=mailto:support@hpcc.ucr.edu>support@hpcc.ucr.edu</a>) before transferring any data to the cluster.
After we have reviewed your needs, data classification and appropriate protection level, then it may be possible to proceed to use the HPCC.</span></p><p>Here are a few basic rules to keep in mind:</p><ul><li>Always be aware of access control methods (Unix permissions and ACLs), do not allow others to view the data (ie. chmod 400 filename)</li><li>Do not make unnecessary copies of the data</li><li>Do not transfer the data to insecure locations</li><li>Encrypt data when/where possible</li><li>Delete all data when it is no longer needed</li></ul><h2 id=access-controls>Access Controls</h2><p>When sharing files with others, it is imperative that proper permission are used.
However, basic Unix permissions (user,group,other) may not be adequate.
It is better to use ACLs in order to allow fine grained access to sensitive files.</p><h3 id=gpfs-acls>GPFS ACLs</h3><p>GPFS is used for most of our filesystems (/rhome and /bigdata) and it uses nfsv4 style ACLs.
Users are able to explicitly allow many individuals, or groups, access to specific files or directories.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Get current permissions and store in acls file</span>
mmgetacl /path/to/file &gt; ~/acls.txt

<span style=color:#8f5902;font-style:italic># Edit acls file containing permissions</span>
vim ~/acls.txt

<span style=color:#8f5902;font-style:italic># Apply new permissions to file</span>
mmputacl -i ~/acls.txt /path/to/file

<span style=color:#8f5902;font-style:italic># Delete acls file</span>
rm ~/acls.txt
</code></pre></div><p>For more information regarding GPFS ACLs refer to the following: <a href=https://www.ibm.com/support/knowledgecenter/en/STXKQY_4.2.3/com.ibm.spectrum.scale.v4r23.doc/bl1adm_nfsv4syn.htm>GPFS ACLs</a></p><h3 id=xfs-acls>XFS ACLs</h3><p>The XFS filesystem is used for the CentOS operating system and typical unix locations (/,/var,/tmp,etc), as well as /secure.
For more information on how to use ACLs under XFS, please refer to the following: <a href=https://vishmule.com/2015/06/11/access-control-list-acl-permissions-in-rhel7centos7/>CentOS 7 XFS</a></p><blockquote><p>Note: ACLs are not applicable to gocryptfs, which is a FUSE filesystem, not GPFS nor XFS.</p></blockquote><h2 id=encryption>Encryption</h2><p>Under the IS-3 policy, P3 data encryption is mandatory.
It is best if you get into the habit of doing encryption in transit, as well as encryption at rest.
This means, when you move the data (transit) or when the data is not in use (rest), it should be encrypted.</p><h3 id=in-transit>In Transit</h3><p>When transferring files make sure that files are encrypted in flight with one of the following transfer protocols:</p><ul><li>SCP</li><li>SFTP</li><li>RSYNC (via SSH)</li></ul><p>The destination for sensitive data on the cluster must also be encrypted at rest under one of the follow secure locations:</p><ul><li>/dev/shm/ - This location is in RAM, so it does not exist at rest (ensure proper ACLs)</li><li>/secure - This location is encrypted at rest with AES 256 key length (ensure proper ACLs)</li><li>/run/user/$EUID/unencrypted - This location is manually managed, and should be created for access to unencrypted files.</li></ul><p>It is also possible to encrypt your files with GPG (<a href=https://kb.iu.edu/d/awio>GPG Example</a>), before they are transferred.
Thus, during transfer they will be GPG encrypted. However, decryption must occur in one of the secure locations mentioned above.</p><blockquote><p>Note: Never store passphrases/passwords/masterkeys in an unsecure location (ie. a plain text script under /rhome).</p></blockquote><h3 id=at-rest>At Rest</h3><p>There are 3 methods available on the cluster for encryption at rest:</p><ol><li>GPG encryption of files via the command line <a href=https://kb.iu.edu/d/awio>GPG Example</a>, however you must ensure proper ACLs and decryption must occur in a secure location.</li><li>The location &ldquo;/secure&rdquo; is encrypted and is mounted on the head nodes, however you must ensure proper ACLs.</li><li>Create your own location with <a href=https://nuetzlich.net/gocryptfs/forward_mode_crypto/>gocryptfs</a>.</li></ol><h4 id=gocryptfsmgr>GocryptfsMgr</h4><p>You can use <code>gocryptfs</code> directly or use the <code>gocryptfsmgr</code>, which automates a few steps in order to simplify things.</p><p>Here are the basics when using <code>gocryptfsmgr</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Create new encrypted data directory</span>
gocryptfsmgr create bigdata privatedata1

<span style=color:#8f5902;font-style:italic># List all encrypted and unencrypted (access point) directories</span>
gocryptfsmgr list

<span style=color:#8f5902;font-style:italic># Unencrypted privatedata1 (create access point)</span>
gocryptfsmgr open bigdata privatedata1 rw

<span style=color:#8f5902;font-style:italic># Transfer files (ie. SCP,SFTP,RSYNC)</span>
scp user@remote-server:sensitive_file.txt <span style=color:#000>$UNENCRYPTED</span>/privatedata1/sensitive_file.txt

<span style=color:#8f5902;font-style:italic># Remove access point (re-encrypt) privatedata1</span>
gocryptfsmgr close privatedata1

<span style=color:#8f5902;font-style:italic># Remove all access points (re-encrypt all)</span>
gocryptfsmgr quit
</code></pre></div><p>For subsequent access to the encrypted space, (ie. computation or analysis) the follow procedure is recommended:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Request a 2hr interactive job on an exclusive node, resources can be adjusted as needed</span>
srun -p short --exclusive<span style=color:#ce5c00;font-weight:700>=</span>user --pty bash -l

<span style=color:#8f5902;font-style:italic># Unencrypted privatedata1 in read-only mode (create access point)</span>
gocryptfsmgr open bigdata privatedata1 ro

<span style=color:#8f5902;font-style:italic># Read file contents from privatedata1 (simulating work or analysis)</span>
cat <span style=color:#000>$UNENCRYPTED</span>/privatedata1/sensitive_file.txt

<span style=color:#8f5902;font-style:italic># List all encrypted and unencrypted (access points) directories</span>
gocryptfsmgr list

<span style=color:#8f5902;font-style:italic># Make sure we re-encrypt (close access point) for privatedata1</span>
gocryptfsmgr close privatedata1

<span style=color:#8f5902;font-style:italic># Exit from interactive job</span>
<span style=color:#204a87>exit</span>
</code></pre></div><p>With the above methods you can create multiple encrypted directories and access points and move between them.</p><h4 id=gocryptfs>Gocryptfs</h4><p>When using the <code>gocryptfs</code> directly, you will need to know a bit more details on how it works.
The <code>gocryptfs</code> module on the HPCC cluster uses these predefined variables:</p><ol><li><code>HOME_ENCRYPTED</code> = <code>/rhome/$USER/encrypted</code> - Very small encrypted space, not recommended to use</li><li><code>BIGDATA_ENCRYPTED</code> = <code>/rhome/$USER/bigdata/encrypted</code> - Best encrypted space for private data sets</li><li><code>SHARED_ENCRYPTED</code> = <code>/rhome/$USER/shared/encrypted</code> - Encrypted space when intending to share data sets with group</li><li><code>UNENCRYPTED</code> = <code>/run/user/$UID/unencrypted</code> - Access directory where encrypted data will be viewed as unencrypted</li></ol><p>Here is an example how to create an encrypted directory under the <code>BIGDATA_ENCRYPTED</code> location using <code>gocryptfs</code>:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Load gocyptfs software</span>
module load gocryptfs

<span style=color:#8f5902;font-style:italic># Create empty data directory</span>
mkdir -p <span style=color:#000>$BIGDATA_ENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Then intialize empty directory and encrypt it</span>
gocryptfs -aessiv -init <span style=color:#000>$BIGDATA_ENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Create access point directory where encrypted files will be viewed as unencrypted</span>
mkdir -p <span style=color:#000>$UNENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># After that mount the encrypted directory on the access point and open a new shell within it</span>
gocryptfssh <span style=color:#000>$BIGDATA_ENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Transfer files (ie. SCP,SFTP,RSYNC)</span>
scp user@remote-server:sensitive_file.txt <span style=color:#000>$UNENCRYPTED</span>/sensitive_file.txt

<span style=color:#8f5902;font-style:italic># Exiting this shell will automatically unmount the unencrypted directory</span>
<span style=color:#204a87>exit</span>
</code></pre></div><p>For subsequent access to the encrypted space, (ie. computation or analysis) the follow procedure is recommended:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic># Request a 2hr interactive job on an exclusive node, resources can be adjusted as needed</span>
srun -p short --exclusive<span style=color:#ce5c00;font-weight:700>=</span>user --pty bash -l

<span style=color:#8f5902;font-style:italic># Load cyptfs software</span>
module load gocryptfs

<span style=color:#8f5902;font-style:italic># Create unencrypted directory</span>
mkdir -p <span style=color:#000>$UNENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Mount encrypted filesystem as read-only and unmount idling for 1 hour</span>
gocryptfs -ro -i 1h -sharedstorage <span style=color:#000>$BIGDATA_ENCRYPTED</span>/privatedata1 <span style=color:#000>$UNENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Read file contents (simulating work or analysis)</span>
cat <span style=color:#000>$UNENCRYPTED</span>/privatedata1/sensitive_file.txt

<span style=color:#8f5902;font-style:italic># Manually close access point when analysis has completed</span>
fusermount -u <span style=color:#000>$UNENCRYPTED</span>/privatedata1

<span style=color:#8f5902;font-style:italic># Delete old empty access point</span>
rmdir <span style=color:#000>$UNENCRYPTED</span>/privatedata1
</code></pre></div><blockquote><p>WARNING: Avoid writing to the same file at the same time from different nodes. The encrypted file system cannot handle simultaneous writes and will corrupt the file. If simultaneous jobs are necessary then using write mode from a head node and read-only mode from compute nodes may be the best solution here.
Also, be mindful of reamaining job time and make sure that you have unmounted the unencrypted directories before your job ends.</p></blockquote><p>For another example on how to use gocrypfs on an HPC cluster: <a href=https://hpc.uni.lu/blog/2018/sensitive-data-encryption-using-gocryptfs/>Luxembourg HPC gocryptfs Example</a></p><h2 id=deletion>Deletion</h2><p>To ensure the complete removal of data, it is best to <code>shred</code> files instead of removing them with <code>rm</code>. The <code>shred</code> program will overwrite the contents of a file with randomized data such that recovery of this file will be very difficult, if not impossible.</p><p>Instead of using the common <code>rm</code> command to delete something, please use the <code>shred</code> command, like so:</p><pre><code>shred -u somefile
</code></pre><p>The above command will overwrite the file with random data, and then remove (unlink) it.</p><p>If we want to be even more secure, we can pass over the file seven times to ensure that reconstruction is nearly impossible, then remove it:</p><pre><code>shred -v -n 6 -z -u somefile
</code></pre><div class="text-muted mt-5 pt-3 border-top">Last modified July 6, 2021: <a href=../../../commit/651f774be2b3aa8d55c4ebc67ab97fdcf5703530>Docs to Manuals and Events to Community (651f774)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Immediate Email Support" aria-label="Immediate Email Support"><a class=text-white target=_blank rel="noopener noreferrer" href=support@hpcc.ucr.edu><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/UCR_HPCC><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel="noopener noreferrer" href=https://ucr-hpcc.slack.com/><i class="fab fa-slack"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank>Privacy Policy</a></small><p class=mt-2><a href=../../../about/>About</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script>(function(){var c,a,b,d=document.getElementsByTagName('code');for(c=0;c<d.length;){if(b=d[c],b.parentNode.tagName!=='PRE'&&b.childElementCount===0)if(a=b.textContent,/^\$[^$]/.test(a)&&/[^$]\$$/.test(a)&&(a=a.replace(/^\$/,'\\(').replace(/\$$/,'\\)'),b.textContent=a),/^\\\((.|\s)+\\\)$/.test(a)||/^\\\[(.|\s)+\\\]$/.test(a)||/^\$(.|\s)+\$$/.test(a)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(a)){b.outerHTML=b.innerHTML;continue}c++}})()</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true }
    }
});
</script><script src=../../../js/main.min.63db3e552bd0543be17ce4a79a18b744e9cb72256bec42b540e3ab0cd43722d0.js integrity="sha256-Y9s+VSvQVDvhfOSnmhi3ROnLciVr7EK1QOOrDNQ3ItA=" crossorigin=anonymous></script><script src=../../../js/prism.js></script></body></html>